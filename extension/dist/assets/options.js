import{u as f,r as h,j as e,c as b,R as j,I as p,i as N}from"./i18n.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}})();const y=()=>{const{t:l,i18n:c}=f(),[n,r]=h.useState({enabledPlatforms:{twitter:!0,x:!0,facebook:!0,threads:!0,linkedin:!0},riskThresholds:{low:30,high:70},language:"auto",showNotification:!0}),[t,o]=h.useState(!1);h.useEffect(()=>{(async()=>{try{const a=await chrome.storage.sync.get(null);r(i=>({...i,enabledPlatforms:a.enabledPlatforms||i.enabledPlatforms,riskThresholds:a.riskThresholds||i.riskThresholds,language:a.language||i.language,showNotification:a.showNotification!==void 0?a.showNotification:i.showNotification}))}catch(a){console.error("設定の読み込みに失敗しました:",a)}})()},[]),h.useEffect(()=>{if(n.language==="auto"){const s=navigator.language.startsWith("ja")?"ja":"en";c.changeLanguage(s)}else c.changeLanguage(n.language)},[n.language,c]);const d=s=>{r(a=>({...a,enabledPlatforms:{...a.enabledPlatforms,[s]:!a.enabledPlatforms[s]}}))},g=s=>{r(a=>({...a,language:s.target.value}))},u=(s,a)=>{r(i=>({...i,riskThresholds:{...i.riskThresholds,[s]:a}}))},m=()=>{r(s=>({...s,showNotification:!s.showNotification}))},x=async()=>{try{await chrome.storage.sync.set(n),o(!0),setTimeout(()=>o(!1),3e3)}catch(s){console.error("設定の保存に失敗しました:",s)}};return e.jsxs("div",{className:"p-6 max-w-2xl mx-auto bg-white rounded-lg",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2",children:l("options.title")}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3 text-gray-700",children:l("options.platforms")}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(n.enabledPlatforms).map(([s,a])=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:`platform-${s}`,checked:a,onChange:()=>d(s),className:"mr-2 h-5 w-5 text-blue-600"}),e.jsx("label",{htmlFor:`platform-${s}`,className:"text-gray-700 capitalize",children:s})]},s))})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3 text-gray-700",children:l("options.language")}),e.jsxs("select",{value:n.language,onChange:g,className:"w-full p-2 border border-gray-300 rounded",children:[e.jsx("option",{value:"auto",children:"Auto (ブラウザ言語に従う)"}),e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"ja",children:"日本語"})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3 text-gray-700",children:l("options.thresholds")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["低リスク/中リスク境界: ",n.riskThresholds.low,"%"]}),e.jsx("input",{type:"range",min:"10",max:"50",value:n.riskThresholds.low,onChange:s=>u("low",parseInt(s.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["中リスク/高リスク境界: ",n.riskThresholds.high,"%"]}),e.jsx("input",{type:"range",min:"50",max:"90",value:n.riskThresholds.high,onChange:s=>u("high",parseInt(s.target.value)),className:"w-full"})]})]})]}),e.jsx("section",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"show-notification",checked:n.showNotification,onChange:m,className:"mr-2 h-5 w-5 text-blue-600"}),e.jsx("label",{htmlFor:"show-notification",className:"text-gray-700",children:"投稿前のポップアップ通知を表示する"})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:l("options.save")})}),t&&e.jsx("div",{className:"mt-4 p-2 bg-green-100 text-green-700 rounded text-center",children:l("options.saved")})]})},w=b.createRoot(document.getElementById("root"));w.render(e.jsx(j.StrictMode,{children:e.jsx(p,{i18n:N,children:e.jsx(y,{})})}));
